# 4. 기능과 책임 분리

- 하나의 기능은 여러 기능을 필요로 한다.
- 기능을 누가 제공할 것인지 결정해야 한다. 이는 객체지향 설계의 기본 과정이다.
    - 기능은 책임과 함께한다. 분리한 하위 기능을 알맞게 분배해야 한다.

요구사항이 증가하고, 클래스가 커지면(코드가 길어지면) 절차 지향과 동일한 문제가 발생한다.

- 거대한 클래스: 많은 필드를 많은 메서드가 공유
- 거대한 메서드: 많은 변수를 많은 코드가 공유
- 여러 기능이 한 클래스/메서드에 섞여 있을 가능성이 있다.

**따라서 책임에 따라 알맞게 코드 분리가 필요하다.**

## 책임 분배/분리 방법

- 패턴 적용
- 계산 기능 분리
- 외부 연동 분리(네트워크, 메시징, 파일 등 외부 연동 처리코드 분리)
- 조건별 분기를 추상화(연속적인 if-else 추상화 고민하기)

### 패턴 적용

- 전형적인 역할 분리
    - 간단한 웹
        - 컨트롤러, 서비스, DAO
    - 복잡한 도메인
        - 엔티티, 밸류, 리포지토리, 도메인 서비스
    - AOP
        - Aspect(공통 기능)
    - GoF(디자인 패턴)
        - 팩토리, 빌더, 전략, 템플릿 메서드, 프록시/데코레이터 등

> 역할을 분리할 때 의도가 잘 드러나는 이름을 사용해야 한다.  
> 예) HTTP로 추천 데이터 불러오기
> - RecommendService -> HttpDataService

역할 분리가 잘 되면 테스트도 용이하다. 전체가 아닌 필요한 특정 기능만 테스트가 가능해진다. 
